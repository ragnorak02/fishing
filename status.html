<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Isles of the Blue Current â€” Status Dashboard</title>
<style>
  :root {
    --bg: #0f1923;
    --card: #1a2836;
    --border: #2a3f52;
    --text: #c8d6e5;
    --accent: #00d2ff;
    --green: #00e676;
    --yellow: #ffd740;
    --red: #ff5252;
    --orange: #ff9100;
    --dim: #5a7a94;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    padding: 2rem;
    max-width: 960px;
    margin: 0 auto;
  }
  h1 {
    color: var(--accent);
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
  }
  .subtitle {
    color: var(--dim);
    font-size: 0.85rem;
    margin-bottom: 2rem;
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem 1.25rem;
  }
  .card h2 {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--dim);
    margin-bottom: 0.75rem;
  }
  .card.full { grid-column: 1 / -1; }
  .stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0;
    font-size: 0.9rem;
  }
  .stat + .stat { border-top: 1px solid var(--border); }
  .badge {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    text-transform: uppercase;
  }
  .done   { background: #00e67622; color: var(--green); }
  .wip    { background: #ffd74022; color: var(--yellow); }
  .stub   { background: #ff910022; color: var(--orange); }
  .none   { background: #ff525222; color: var(--red); }
  .future { background: #00d2ff18; color: var(--accent); }
  .bar-wrap {
    background: #0d1520;
    border-radius: 4px;
    height: 8px;
    margin-top: 0.4rem;
    overflow: hidden;
  }
  .bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.4s;
  }
  .progress-label {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--dim);
    margin-top: 0.25rem;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
  }
  th {
    text-align: left;
    color: var(--dim);
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 0.4rem 0.5rem;
    border-bottom: 1px solid var(--border);
  }
  td {
    padding: 0.4rem 0.5rem;
    border-bottom: 1px solid #1e2f3f;
  }
  .file-count { color: var(--accent); font-weight: 600; }
  /* Achievements section */
  .ach-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
  }
  .ach-header h2 { margin-bottom: 0; }
  .ach-score {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--accent);
  }
  .ach-score span {
    font-size: 0.85rem;
    font-weight: 400;
    color: var(--dim);
  }
  .ach-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0;
  }
  .ach-row + .ach-row { border-top: 1px solid var(--border); }
  .ach-icon {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    background: #0d1520;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 1.1rem;
  }
  .ach-icon.locked { opacity: 0.35; }
  .ach-info { flex: 1; min-width: 0; }
  .ach-name {
    font-size: 0.9rem;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .ach-desc {
    font-size: 0.75rem;
    color: var(--dim);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .ach-pts {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--accent);
    flex-shrink: 0;
  }
  .ach-locked .ach-name { color: var(--dim); }
  .ach-locked .ach-pts { color: #2a3f52; }
  #ach-reload {
    background: var(--border);
    color: var(--text);
    border: none;
    padding: 0.3rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    cursor: pointer;
  }
  #ach-reload:hover { background: var(--dim); }
  @media (max-width: 600px) {
    .grid { grid-template-columns: 1fr; }
    body { padding: 1rem; }
  }
</style>
</head>
<body>

<h1>Isles of the Blue Current</h1>
<p class="subtitle">Project Status Dashboard &mdash; Auto-generated from repo scan</p>

<!-- Phase overview -->
<div class="grid">
  <div class="card">
    <h2>Current Phase</h2>
    <div style="font-size:1.6rem;font-weight:700;color:var(--green);">Phase 1</div>
    <div style="color:var(--dim);font-size:0.85rem;margin-top:0.25rem;">Core Loop &mdash; COMPLETE</div>
    <div class="bar-wrap" style="margin-top:0.6rem;">
      <div class="bar-fill" style="width:100%;background:var(--green);"></div>
    </div>
    <div class="progress-label"><span>Phase 1 Progress</span><span>100%</span></div>
  </div>
  <div class="card">
    <h2>Codebase</h2>
    <div class="stat"><span>GDScript files</span><span class="file-count">36</span></div>
    <div class="stat"><span>Scenes (.tscn)</span><span class="file-count">6</span></div>
    <div class="stat"><span>Fish data (.tres)</span><span class="file-count">10</span></div>
    <div class="stat"><span>Placeholder SVGs</span><span class="file-count">23</span></div>
    <div class="stat"><span>Shaders</span><span class="file-count">2</span></div>
  </div>
</div>

<!-- Systems status -->
<div class="card full" style="margin-bottom:1.5rem;">
  <h2>Systems Status</h2>
  <table>
    <tr><th>System</th><th>Location</th><th>Status</th></tr>
    <tr><td>GameManager</td><td>scripts/autoload/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Inventory</td><td>scripts/autoload/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>SceneTransition</td><td>scenes/transitions/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>ControlsOverlay</td><td>scripts/ui/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>FishDatabase</td><td>scripts/data/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>EconomySystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>UpgradeSystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>VehicleController</td><td>scripts/vehicle/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>VehicleStateMachine</td><td>scripts/vehicle/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>SurfaceState</td><td>scripts/vehicle/states/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>SubmergedState</td><td>scripts/vehicle/states/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>BatterySystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>DepthSystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>DurabilitySystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>SonarSystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>MountedHarpoon</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>OxygenSystem</td><td>scripts/systems/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>FishAI</td><td>scripts/entities/</td><td><span class="badge done">done</span></td></tr>
    <tr><td>AudioManager</td><td>scripts/autoload/</td><td><span class="badge stub">stub</span></td></tr>
    <tr><td>AirState</td><td>scripts/vehicle/states/</td><td><span class="badge stub">stub</span></td></tr>
    <tr><td>Test Suite</td><td>&mdash;</td><td><span class="badge none">missing</span></td></tr>
    <tr><td>Save/Load</td><td>&mdash;</td><td><span class="badge future">phase 2</span></td></tr>
  </table>
</div>

<!-- Scenes -->
<div class="grid">
  <div class="card">
    <h2>Scenes</h2>
    <div class="stat"><span>MainMenu</span><span class="badge done">done</span></div>
    <div class="stat"><span>HubTown</span><span class="badge done">done</span></div>
    <div class="stat"><span>OceanSurface</span><span class="badge done">done</span></div>
    <div class="stat"><span>DiveScene</span><span class="badge done">done</span></div>
    <div class="stat"><span>HaulSummary</span><span class="badge done">done</span></div>
    <div class="stat"><span>SceneTransition</span><span class="badge done">done</span></div>
  </div>
  <div class="card">
    <h2>Assets</h2>
    <div class="stat"><span>Art</span><span class="badge stub">svg placeholders</span></div>
    <div class="stat"><span>Audio</span><span class="badge none">missing</span></div>
    <div class="stat"><span>Fonts</span><span class="badge none">missing</span></div>
    <div class="stat"><span>Shaders</span><span class="badge done">2 done</span></div>
    <div class="stat"><span>Fish Data</span><span class="badge done">10 species</span></div>
  </div>
</div>

<!-- Upgrade tracks -->
<div class="card full" style="margin-bottom:1.5rem;">
  <h2>Upgrade Tracks (6 x 3 levels)</h2>
  <table>
    <tr><th>Track</th><th>Effect</th><th>Levels</th><th>Status</th></tr>
    <tr><td>Boat Speed</td><td>Surface/sub movement multiplier</td><td>3</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Oxygen</td><td>Dive duration</td><td>3</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Harpoon Range</td><td>Projectile distance</td><td>3</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Durability</td><td>Hull hit points</td><td>3</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Battery</td><td>Submersion time</td><td>3</td><td><span class="badge done">done</span></td></tr>
    <tr><td>Sonar</td><td>Detection range</td><td>3</td><td><span class="badge done">done</span></td></tr>
  </table>
</div>

<!-- Achievements -->
<div class="card full" id="achievements-card" style="margin-bottom:1.5rem;">
  <div class="ach-header">
    <h2>Achievements</h2>
    <button id="ach-reload" onclick="loadAchievements()">Reload Data</button>
  </div>
  <div id="ach-summary" style="margin-bottom:0.75rem;">
    <div style="display:flex;justify-content:space-between;align-items:baseline;">
      <div class="ach-score"><span id="ach-earned">0</span> <span>/ <span id="ach-possible">0</span> pts</span></div>
      <span id="ach-count" style="font-size:0.8rem;color:var(--dim);">0 / 0 unlocked</span>
    </div>
    <div class="bar-wrap" style="margin-top:0.5rem;">
      <div class="bar-fill" id="ach-bar" style="width:0%;background:var(--accent);"></div>
    </div>
    <div class="progress-label"><span>Achievement Progress</span><span id="ach-pct">0%</span></div>
  </div>
  <div id="ach-list">
    <div style="color:var(--dim);font-size:0.85rem;padding:1rem 0;text-align:center;">
      Loading achievements&hellip;
    </div>
  </div>
</div>

<!-- Phase roadmap -->
<div class="card full">
  <h2>Phase Roadmap</h2>
  <div class="stat"><span>Phase 1 &mdash; Core Loop</span><span class="badge done">complete</span></div>
  <div class="stat"><span>Phase 2 &mdash; Polish &amp; Content</span><span class="badge wip">next</span></div>
  <div class="stat"><span>Phase 3 &mdash; Expansion</span><span class="badge future">future</span></div>
</div>

<script>
function loadAchievements() {
  var card = document.getElementById('ach-list');
  fetch('achievements.json')
    .then(function(r) { return r.json(); })
    .then(function(data) { renderAchievements(data); })
    .catch(function() {
      card.innerHTML = '<div style="color:var(--dim);font-size:0.85rem;padding:1rem 0;text-align:center;">' +
        'Could not load achievements.json &mdash; ensure it is in the same directory as status.html</div>';
    });
}

function renderAchievements(data) {
  var achievements = data.achievements || [];
  var meta = data.meta || {};

  // Calculate stats
  var unlocked = achievements.filter(function(a) { return a.unlocked; });
  var earned = unlocked.reduce(function(sum, a) { return sum + a.points; }, 0);
  var possible = achievements.reduce(function(sum, a) { return sum + a.points; }, 0);
  var pct = possible > 0 ? Math.round((earned / possible) * 100) : 0;

  document.getElementById('ach-earned').textContent = earned;
  document.getElementById('ach-possible').textContent = possible;
  document.getElementById('ach-count').textContent = unlocked.length + ' / ' + achievements.length + ' unlocked';
  document.getElementById('ach-bar').style.width = pct + '%';
  document.getElementById('ach-pct').textContent = pct + '%';

  // Color the bar based on progress
  var bar = document.getElementById('ach-bar');
  if (pct === 100) bar.style.background = 'var(--green)';
  else if (pct >= 50) bar.style.background = 'var(--accent)';
  else if (pct > 0) bar.style.background = 'var(--yellow)';

  // Sort: unlocked (most recent first), then locked
  var sorted = unlocked
    .sort(function(a, b) { return (b.unlockedAt || '').localeCompare(a.unlockedAt || ''); })
    .concat(achievements.filter(function(a) { return !a.unlocked; }));

  // Show up to 5 most recent unlocked + all locked
  var recentUnlocked = sorted.filter(function(a) { return a.unlocked; }).slice(0, 5);
  var locked = sorted.filter(function(a) { return !a.unlocked; });
  var display = recentUnlocked.concat(locked);

  var html = '';
  if (display.length === 0) {
    html = '<div style="color:var(--dim);font-size:0.85rem;padding:1rem 0;text-align:center;">No achievements defined</div>';
  } else {
    // Section label for unlocked
    if (recentUnlocked.length > 0) {
      html += '<div style="font-size:0.7rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--dim);padding:0.3rem 0;">Recent Unlocks</div>';
    }
    recentUnlocked.forEach(function(a) {
      var date = a.unlockedAt ? new Date(a.unlockedAt).toLocaleDateString() : '';
      html += '<div class="ach-row">' +
        '<div class="ach-icon">&#127942;</div>' +
        '<div class="ach-info"><div class="ach-name">' + esc(a.name) + '</div>' +
        '<div class="ach-desc">' + esc(a.description) + (date ? ' &mdash; ' + date : '') + '</div></div>' +
        '<div class="ach-pts">+' + a.points + '</div></div>';
    });
    if (unlocked.length > 5) {
      html += '<div style="font-size:0.75rem;color:var(--dim);padding:0.3rem 0;text-align:center;">+ ' +
        (unlocked.length - 5) + ' more unlocked</div>';
    }
    // Section label for locked
    if (locked.length > 0) {
      html += '<div style="font-size:0.7rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--dim);padding:0.5rem 0 0.3rem;">Locked</div>';
    }
    locked.forEach(function(a) {
      html += '<div class="ach-row ach-locked">' +
        '<div class="ach-icon locked">&#128274;</div>' +
        '<div class="ach-info"><div class="ach-name">' + esc(a.name) + '</div>' +
        '<div class="ach-desc">' + esc(a.description) + '</div></div>' +
        '<div class="ach-pts">+' + a.points + '</div></div>';
    });
  }
  document.getElementById('ach-list').innerHTML = html;
}

function esc(s) {
  var d = document.createElement('div');
  d.appendChild(document.createTextNode(s));
  return d.innerHTML;
}

// Auto-load on page open
loadAchievements();
</script>

</body>
</html>
